---
## Front matter
lang: ru-RU
title: Мандатное разграничение прав в Linux.
author: |
	 Алхимова Дарья Сергеевна НБИ-01-19\inst{1}

institute: |
	\inst{1}Российский Университет Дружбы Народов

date: 12 октября, 2022

## Formatting
mainfont: PT Serif
toc: false
slide_level: 2
theme: metropolis
header-includes: 
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
aspectratio: 43
section-titles: true
---

# Информация

## Докладчик


  * Алхимова Дарья Сергеевна
  * студентка 4 курса
  * группы НБИбд-01-19
  * Российский университет дружбы народов
  * [1032191645@rudn.ru](mailto:1032191645@rudn.ru)


# Цель работы

Целью данной работы является приобретение навыков администрирования ОС Linux, получение первого практического знакомства с технологией SELinux1 и проверка работы SELinx на практике совместно с веб-сервером Apache.

# Выполнение лабораторной работы

## Прверила работу SELinux

Вошла в систему и вызвала команды `getenforce` и `sestatus` 

![Проверка работы SELinux](images6/1.png){ #fig:001 width=70% }

# Выполнение лабораторной работы

## Определила контекст безопасности Apache

Использовала команду `ps auxZ | grep httpd`.

![Контекст Apache](images6/3.png){ #fig:003 width=70% }

# Выполнение лабораторной работы

## Посмотрела статистику по политике

Использовала команду `seinfo`

![Статистика по политике](images6/5.png){ #fig:005 width=70% }


# Выполнение лабораторной работы

## Определила тип файлов и поддиректорий /var/www 

Использовала команду `ls -lZ /var/www`. Определила круг пользователей, которым разрешено создание файлов в директории /var/www/html.

![Типы файлов, поддиректорий и права для /www и /html](images6/6.png){ #fig:006 width=70% }

# Выполнение лабораторной работы

## Создала html-файл test.html

Файл следующего содержания:  
`<html>`  
`<body>test</body>`  
`</html>`

![Создание файла test.html](images6/7.png){ #fig:007 width=70% }

# Выполнение лабораторной работы

## Проверила контекст созданного файла

Контекст, присваиваемый по умолчанию вновь созданным файлам в директории /var/www/html - httpd_sys_content_t

![Контекст файла test.html](images6/8.png){ #fig:008 width=70% }

# Выполнение лабораторной работы

## Обратилась к файлу через веб-сервер

Ввела адрес `http://127.0.0.1/test.html`

![Открытие test.html через браузер](images6/9.png){ #fig:009 width=70% }

# Выполнение лабораторной работы

## Изменила контекст файла

Использовала `chcon -t samba_share_t /var/www/html/test.html`.  

![Смена контекста файла test.html](images6/11.png){ #fig:011 width=70% }

# Выполнение лабораторной работы

## Повторно обратилась к файлу через веб-сервер

Получила сообщение об ошибке

![Повторное открытие test.html через браузер](images6/12.png){ #fig:012 width=70% }

# Выполнение лабораторной работы

## Запустила веб-сервер Apache на прослушивание ТСР-порта 81

Для этого в файле /etc/httpd/httpd.conf нашла строчку Listen 80 и заменила её на Listen 81

![httpd.conf после исправления](images6/16.png){ #fig:016 width=70% }
 
# Выполнение лабораторной работы

## Выполнила перезапуск веб-сервера Apache

![Перезапуск Apache](images6/17.png){ #fig:017 width=70% }

# Выполнение лабораторной работы

## Добавила порт 81

Выполнила команду `semanage port -a -t http_port_t -р tcp 81` и проверила список портов командой `semanage port -l | grep http_port_t`

![Добавление и просмотр наличия 81 порта](images6/22.png){ #fig:022 width=70% }

# Выполнение лабораторной работы

## Попробовала запустить веб-сервер Apache ещё раз

![Запуск Apache](images6/23.png){ #fig:023 width=70% }

# Выполнение лабораторной работы

## Вернула исходный контекст файлу test.html

Использовала `chcon -t httpd_sys_content_t /var/www/html/test.html`

![Возвращение контекста файлу test.html](images6/24.png){ #fig:024 width=70% }

# Выполнение лабораторной работы

## Снова попробовала получить доступ к файлу через веб-сервер

Ввела в браузере адрес `http://127.0.0.1:81/test.html`.

![Открытие файла test.html через браузер](images6/25.png){ #fig:025 width=70% }

# Выполнение лабораторной работы

## Исправила обратно конфигурационный файл Apache

![Возвращение настроек на 80 порт httpd.conf](images6/26.png){ #fig:026 width=70% }

# Выполнение лабораторной работы

## Пропробовала удалить привязку `http_port_t` к 81 порту

Операция запрещена, поэтому порт 81 остался в списке.

![Попытка удаления 81 порта](images6/27.png){ #fig:027 width=70% }

# Выполнение лабораторной работы

## Удалила файл test.html

Использовала команду `rm /var/www/html/test.html` 

![Удаление файла test.html](images6/28.png){ #fig:028 width=70% }


# Вывод

В процессе выполнения данной лабораторной работы я приобрела навыки администрирования ОС Linux. Получила первое практическое знакомство с технологией SELinux и проверила работу SELinx на практике совместно с веб-сервером Apache.
